<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta charset="UTF-8">
  <link href='../css/promo/promo.css' rel='stylesheet' type='text/css' />
  <script src='../js/jquery.js' type='text/javascript'></script>
  <script src='../js/persist-min.js' type='text/javascript'></script>
  <script src='../js/afycommon.js' type='text/javascript'></script>
  <script src='../js/promo/promo.js' type='text/javascript'></script>
  <title>AffinityNG</title>
</head>
<body>

<!--
  This document presents affinity-ng to a general audience.
-->

<div id='thecanvas_c'>
  <canvas id='thecanvas'></canvas>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":1000, "intradelay":1000, "fontsizes":[18,15]}'>
  <h1>In a Nutshell</h1>
  <ul>
    <li class="step_0 mode_all">
      <p>AffinityNG is a universal embedded platform for<p>
      <ul>
        <li>information processing,</li>
        <li>control and</li>
        <li>communication</li>
        <li class="vspacer">20</li>
      </ul>
    </li>
    <li class="step_1 mode_all">
      <p>with a graph database at its heart</p>
      <ul>
        <li class="vspacer">20</li>
      </ul>
    </li>
    <li class="step_2 mode_all">
      <p>designed to lower the barrier of entry for systems targeting</p>
      <ul>
        <li>the &ldquo;Internet of Things&rdquo; (IoT),</li>
        <li>&ldquo;Wireless Sensor Networks&rdquo; (WSNs),</li>
        <li>&ldquo;Ubiquitous Computing&rdquo;,</li>
        <li>control systems and</li>
        <li>robotics</li>
      </ul>
    </li>
    <li class="step_3 mode_all vspacer" promostyle='{"delay":5000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":1000, "intradelay":1000, "fontsizes":[18,15]}'>
  <h1>Context: Properties of the IoT and M2M</h1>
  <ul>
    <li class="step_0 mode_all">Multitude of devices</li>
    <li class="step_1 mode_all">Variety (formats, models, protocols etc.)</li>
    <li class="step_2 mode_all">Inconspicuousness (often a requirement)</li>
    <li class="step_3 mode_all">Criticality (e.g. health care, smart grid)</li>
    <li class="step_4 mode_all">Intrusiveness (privacy &amp; security problems)</li>
    <li class="step_5 mode_all">Devices limited in functionality</li>
    <li class="step_6 mode_all">Low-powered</li>
    <li class="step_7 mode_all">Embedded</li>
    <li class="step_8 mode_all">Mobile</li>
    <li class="step_9 mode_all">Here-to-stay</li>
    <li class="step_10 mode_all">Passive (e.g. NFC RFIDs) vs active</li>
    <li class="step_11 mode_all vspacer" promostyle='{"delay":5000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":1000, "intradelay":1000, "fontsizes":[18,15]}'>
  <h1>Context: Challenges of the IoT and M2M</h1>
  <ul>
    <li class="step_0 mode_all">Fragmentation of solutions (silos)</li>
    <li class="step_1 mode_all">Network misalignment</li>
    <li class="step_2 mode_all">Security</li>
    <li class="step_3 mode_all">Privacy</li>
    <li class="step_4 mode_all">"Locking" to communication service providers</li>
    <li class="step_5 mode_all vspacer" promostyle='{"delay":5000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":1000, "intradelay":1000, "fontsizes":[18,15]}'>
  <h1>Architecture</h1>
  <ul>
    <li class="step_0 mode_all">Complete data-acquisition and device-control functionality</li>
    <li class="step_1 mode_all">Built-in graph database</li>
    <li class="step_2 mode_all">Agile multi-level programming</li>
    <li class="step_3 mode_all">Native support for data streaming and CEP</li>
    <li class="step_4 mode_all">Flexible, extendable &amp; secure communication architecture</li>
    <li class="step_5 mode_all">Foundation for distributed multi-agent systems</li>
    <li class="step_6 mode_all">Tiny, fast and highly portable</li>
    <li class="step_7 mode_all">Open source (Apache v2)</li>
    <li class="step_8 mode_all vspacer" promostyle='{"delay":5000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":5000, "intradelay":1000, "fontsizes":[18,15]}'>
  <h1>Usage Patterns</h1>
  <ul>
    <li class="step_0 mode_all staticgraph">
      (function() { return {
        layout:[0, 0, 1000, 480],
        speed:0.5,
        instructions: [
          {type:'fillRect', t:0, x:0, y:0, w:1, h:1, fillStyle:'#eeeeee'},

          {type:'fillText', t:0, x:0.07, y:0.375, dy:0.5, fillStyle:'#000000', text:'sensors', font:'bold 14pt Helvetica'},
          {type:'strokeThickArrow', t:0, x:0.17, y:0.38, angle:0, thickness:0.02, strokeStyle:'#004400'},
          {type:'strokeDB', t:0, x:0.21, y:0.25, w:0.26, h:0.5, strokeStyle:'#555555'},
          {type:'fillText', t:0, x:0.34, y:0.48, dx:-0.5, dy:0.5, fillStyle:'#000000', text:'AffinityNG', font:'bold 14pt Helvetica'},
          {type:'strokeThickVerticalArrowBidir', t:0, duration:0.5, x:0.34, y:0.25, thickness:0.02, strokeStyle:'#004400'},
          {type:'fillText', t:0, duration:0.5, x:0.34, y:0.15, dx:-0.5, dy:0.5, fillStyle:'#555555', text:'cloud', font:'bold 14pt Helvetica'},
          {type:'fillText', t:0, duration:0.5, x:0.34, y:0.55, dx:-0.5, dy:0.5, fillStyle:'#666666', text:'data cleaning &amp; aggregation', font:'14pt Helvetica'},

          {type:'fillText', t:0.5, x:0.06, y:0.635, dy:0.5, fillStyle:'#000000', text:'actuators', font:'bold 14pt Helvetica'},
          {type:'strokeThickArrow', t:0.5, x:0.17, y:0.64, angle:180, thickness:0.02, strokeStyle:'#004400'},
          {type:'fillText', t:0.5, x:0.14, y:0.46, dx:-0.5, dy:0.5, fillStyle:'#666666', text:'simple', font:'14pt Helvetica'},
          {type:'fillText', t:0.5, x:0.14, y:0.51, dx:-0.5, dy:0.5, fillStyle:'#666666', text:'control', font:'14pt Helvetica'},
          {type:'fillText', t:0.5, x:0.14, y:0.56, dx:-0.5, dy:0.5, fillStyle:'#666666', text:'platform', font:'14pt Helvetica'},

          {type:'strokeThickHorizontalArrowBidir', t:1, x:0.5, y:0.5, thickness:0.02, strokeStyle:'#004400'},
          {type:'strokeDB', t:1, x:0.53, y:0.25, w:0.26, h:0.5, strokeStyle:'#555555'},
          {type:'fillText', t:1, x:0.66, y:0.48, dx:-0.5, dy:0.5, fillStyle:'#000000', text:'AffinityNG', font:'bold 14pt Helvetica'},
          {type:'fillText', t:1, x:0.66, y:0.55, dx:-0.5, dy:0.5, fillStyle:'#555555', text:'(peer or higher-level)', font:'14pt Helvetica'},
          {type:'strokeThickVerticalArrowBidir', t:1, x:0.66, y:0.25, thickness:0.02, strokeStyle:'#004400'},
          {type:'fillText', t:1, x:0.66, y:0.15, dx:-0.5, dy:0.5, fillStyle:'#555555', text:'cloud', font:'bold 14pt Helvetica'},
          {type:'fillText', t:1, x:0.34, y:0.60, dx:-0.5, dy:0.5, fillStyle:'#555555', text:'data storage &amp; learning', font:'14pt Helvetica'},
          {type:'fillText', t:1, x:0.34, y:0.65, dx:-0.5, dy:0.5, fillStyle:'#555555', text:'connectivity', font:'14pt Helvetica'},
          {type:'strokeThickVerticalArrowBidir', t:1, x:0.34, y:0.25, thickness:0.02, strokeStyle:'#004400'},
          {type:'fillText', t:1, x:0.34, y:0.15, dx:-0.5, dy:0.5, fillStyle:'#555555', text:'cloud', font:'bold 14pt Helvetica'},
          {type:'fillText', t:1, x:0.34, y:0.55, dx:-0.5, dy:0.5, fillStyle:'#666666', text:'data cleaning &amp; aggregation', font:'14pt Helvetica'},
        ]
      };})();
    </li>
    <li class="step_1 mode_all vspacer" promostyle='{"delay":40000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":1000, "intradelay":1000, "fontsizes":[18,15]}'>
  <h1>Levels of Autonomy</h1>
  <ul>
    <li class="step_0 mode_all">
      <p>Passive information store</p>
      <ul>
        <li>stores, searches and retrieves structured and unstructured information</li>
        <li>accumulates &amp; aggregates information</li>
        <li>supports free-text indexing and search</li>
        <li class="vspacer">20</li>
      </ul>
    </li>
    <li class="step_1 mode_all">
      <p>Semi-autonomous agent</p>
      <ul>
        <li>all the above, plus interacts with humans and can act on their behalf</li>
        <li>uses M2M</li>
        <li class="vspacer">20</li>
      </ul>
    </li>
    <li class="step_2 mode_all">
      <p>Autonomous agent</p>
      <ul>
        <li>all the above, but can operate on its own</li>
        <li>has a set of goals</li>
        <li>interacts with other agents (and the real world) to satisfy its goals</li>
        <li class="vspacer">20</li>
      </ul>
    </li>
    <li class="step_3 mode_all vspacer" promostyle='{"delay":5000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":1000, "intradelay":1000, "fontsizes":[18,15]}'>
  <h1>Agile Programming</h1>
  <ul>
    <li class="step_0 mode_all">
      <p>pathSQL</p>
      <ul>
        <li>support for standard SQL including joins, group by, aggregation etc.</li>
        <li>path expressions with regular expression semantics</li>
        <li>data and actions (including device control) expressed in pathSQL</li>
        <li>support for stream processing and event detection</li>
        <li class="vspacer">20</li>
      </ul>
    </li>
    <li class="step_1 mode_all">
      <p>Rule-based programming</p>
      <ul>
        <li>lower level: declaration of conditions and actions</li>
        <li>higher level: rules defined by a conjunction of conditions and a list of actions</li>
        <li class="vspacer">20</li>
      </ul>
    </li>
    <li class="step_2 mode_all">
      <p>Finite-State Machine (FSM) programming</p>
      <ul>
        <li>state transition diagrams</li>
        <li>actions associated with state transitions</li>
        <li class="vspacer">20</li>
      </ul>
    </li>
    <li class="step_3 mode_all">
      <p>Communication and transformation stacks</p>
      <ul>
        <li>loadable services implemented in C++</li>
        <li>very simple assembly and configuration (e.g. graphical)</li>
        <li class="vspacer">20</li>
      </ul>
    </li>
    <li class="step_4 mode_all vspacer" promostyle='{"delay":5000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":5000, "intradelay":1000, "fontsizes":[18,12]}'>
  <h1>Agile Programming</h1>
  <ul>
    <li class="step_0 mode_all staticgraph">
      (function() { return {
        layout:[0, 0, 1000, 480],
        instructions: [
          {type:'strokeThickVerticalArrowBidir', t:0, x:0.5, y:0.07, thickness:0.01, strokeStyle:'#444444'},
          {type:'fillText', t:0, x:0.5, y:0.02, dx:-0.5, dy:0.5, fillStyle:'#000000', text:'other devices, regional infrastructures, cloud etc.', font:'bold 10pt Helvetica'},

          {type:'fillText', x:0, y:0.09, w:0.5, h:0.02, fillStyle:'#ff4444', text:'Typical Stack', font:'bold 10pt Helvetica'},
          {type:'fillRect', x:0, y:0.1, w:0.5, h:0.675, fillStyle:'#ffdddd'},
          {type:'textBox', t:0, x:0.02, y:0.13, w:0.22, h:0.05, text:'HTTP / HTTPS / TCP', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000', dashed:true},
          {type:'textBox', t:0, x:0.26, y:0.13, w:0.22, h:0.05, text:'XMPP', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000', dashed:true},
          {type:'strokeThickVerticalArrowBidir', t:0, x:0.06, y:0.24, thickness:0.02, strokeStyle:'#ff4444'},
          {type:'fillText', t:0, x:0.08, y:0.205, dy:0.5, fillStyle:'#ff4444', text:'translation (REST/xml/SOAP/...)', font:'10pt Helvetica'},
          {type:'textBox', t:0, x:0.1, y:0.23, w:0.26, h:0.05, text:'App Upgrade/Interop Logic (schemas etc.)', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000'},
          {type:'textBox', t:0, x:0.37, y:0.23, w:0.11, h:0.05, text:'Access Control', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000'},
          {type:'textBox', t:0, x:0.02, y:0.30, w:0.46, h:0.05, text:'Data-Centric Applications (Java / C)', font:'bold 10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000'},
          {type:'strokeThickVerticalArrowBidir', t:0, x:0.17, y:0.375, thickness:0.005, strokeStyle:'#ff4444'},
          {type:'fillText', t:0, x:0.18, y:0.375, dy:0.5, fillStyle:'#ff4444', text:'translation/ORM', font:'10pt Helvetica'},
          {type:'strokeThickVerticalArrowBidir', t:0, x:0.375, y:0.425, thickness:0.02, strokeStyle:'#ff4444'},
          {type:'fillText', t:0, x:0.395, y:0.425, dy:0.5, fillStyle:'#ff4444', text:'ORM', font:'10pt Helvetica'},
          {type:'textBox', t:0, x:0.02, y:0.40, w:0.2, h:0.05, text:'Rule Engine (Jess / Esper / ...)', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000', dashed:true},
          {type:'textBox', t:0, x:0.23, y:0.40, w:0.1, h:0.05, text:'SystemC', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000', dashed:true},
          {type:'strokeThickVerticalArrowBidir', t:0, x:0.17, y:0.475, thickness:0.005, strokeStyle:'#ff4444'},
          {type:'fillText', t:0, x:0.18, y:0.475, dy:0.5, fillStyle:'#ff4444', text:'[ORM]', font:'10pt Helvetica'},
          {type:'textBox', t:0, x:0.1, y:0.50, w:0.3, h:0.05, text:'sqlite', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000', dashed:true},
          {type:'fillText', t:0, x:0.41, y:0.50, dy:1.5, fillStyle:'#ff4444', text:'encryption?', font:'10pt Helvetica'},
          {type:'strokeDB', x:0.05, y:0.57, w:0.1, h:0.1, strokeStyle:'#555555'},
          {type:'fillText', t:0, x:0.1, y:0.60, dx:-0.5, dy:0, fillStyle:'#555555', text:'configs', font:'10pt Helvetica'},
          {type:'fillText', t:0, x:0.1, y:0.63, dx:-0.5, dy:0, fillStyle:'#555555', text:'profiles', font:'10pt Helvetica'},
          {type:'fillText', t:0, x:0.1, y:0.66, dx:-0.5, dy:0, fillStyle:'#555555', text:'topology', font:'10pt Helvetica'},
          {type:'strokeDB', x:0.2, y:0.57, w:0.1, h:0.1, strokeStyle:'#555555'},
          {type:'fillText', t:0, x:0.25, y:0.63, dx:-0.5, dy:0, fillStyle:'#555555', text:'facts', font:'10pt Helvetica'},
          {type:'strokeDB', x:0.35, y:0.57, w:0.1, h:0.1, strokeStyle:'#555555'},
          {type:'fillText', t:0, x:0.4, y:0.63, dx:-0.5, dy:0, fillStyle:'#555555', text:'rules', font:'10pt Helvetica'},
          {type:'textBox', t:0, x:0.1, y:0.70, w:0.3, h:0.05, text:'Java VM', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000', dashed:true},

          {type:'textBox', t:0, x:0.05, y:0.8, w:0.3, h:0.05, text:'HW Interface', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000'},
          {type:'textBox', t:0, x:0.35, y:0.8, w:0.3, h:0.05, text:'Linux / Other', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000'},
          {type:'textBox', t:0, x:0.65, y:0.8, w:0.3, h:0.05, text:'glibc', font:'10pt Helvetica', strokeStyle:'#999999', fillStyle:'#aaaaaa', textStyle:'#000000'},

          {type:'strokeThickVerticalArrowBidir', t:0, x:0.5, y:0.88, thickness:0.01, strokeStyle:'#444444'},
          {type:'fillText', t:0, x:0.52, y:0.88, dy:0.5, fillStyle:'#444444', text:'Zigbee, Bluetooth ULP, 6LoWPAN etc.', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0, x:0.5, y:0.93, dx:-0.5, fillStyle:'#000000', text:'sensors (temperature, humidity, movement, carbon dioxide, pressure, spatial etc.)', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0, x:0.5, y:0.96, dx:-0.5, fillStyle:'#000000', text:'actuators (on/off switch, piezoelectrical, jacks etc.)', font:'bold 10pt Helvetica'},

          {type:'fillText', t:0.4, x:1.0, y:0.09, w:0.5, h:0.02, dx:-1.0, fillStyle:'#003300', text:'AffinityNG', font:'bold 10pt Helvetica'},
          {type:'fillRect', t:0.4, x:0.5, y:0.1, w:0.5, h:0.675, fillStyle:'#ddffdd'},
          {type:'strokeDB', t:0.4, x:0.65, y:0.15, w:0.2, h:0.4, strokeStyle:'#555555'},
          {type:'fillText', t:0.4, x:0.75, y:0.35, dx:-0.5, fillStyle:'#003300', text:'facts = PINs', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0.4, x:0.75, y:0.38, dx:-0.5, fillStyle:'#003300', text:'rules = PINs', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0.4, x:0.75, y:0.41, dx:-0.5, fillStyle:'#003300', text:'configs = PINs', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0.4, x:0.75, y:0.44, dx:-0.5, fillStyle:'#003300', text:'topology &amp; networking = PINs', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0.4, x:0.75, y:0.47, dx:-0.5, fillStyle:'#003300', text:'access control = PINs', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0.6, x:0.52, y:0.62, fillStyle:'#003300', text:'NO language VM', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0.7, x:0.52, y:0.65, fillStyle:'#003300', text:'NO ORM', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0.8, x:0.52, y:0.68, fillStyle:'#003300', text:'NO translation: 1 language, 1 modeling syntax', font:'bold 10pt Helvetica'},
          {type:'fillText', t:0.9, x:0.52, y:0.72, fillStyle:'#003300', text:'Navigation in data structures is as flexible as in java &amp; as powerful as in SQL', font:'10pt Helvetica'},
          {type:'fillText', t:1.0, x:0.52, y:0.75, fillStyle:'#003300', text:'Native AES encryption', font:'10pt Helvetica'},
        ]
      };})();
    </li>
    <li class="step_1 mode_all vspacer" promostyle='{"delay":10000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":1000, "intradelay":1000, "fontsizes":[18,12]}'>
  <h1>More Goodies (1/2)</h1>
  <ul>
    <li class="step_0 mode_all">
      <p>Path expressions can recurse arbitrarily deep graphs<p>
      <ul>
        <li class="bullet_none">SELECT * FROM :0.friendof.rootproject.children{*}[access=:1].children[exists(pname)]</li>
        <li>Compared with Java+neo4j:</li>
        <li class="code_comparator" meta='{"layout":[-40, 0, 1000, 200], "titles":["AffinityNG", "Java+neo4j"], "font_type":"Courier", "font_size":10, "start_side":1, "separator_width":4}'>
          <ul>
<li>
SELECT * FROM :0.friendof.rootproject.children{*}[access=:1].children[exists(pname)]
</li>
<li>
// Find all resources given access to 'lN' by his friends
lNumFound = 0;
final int lOrgID = (Integer)lN.getProperty("orgid");
Iterator&lt;Relationship&gt; lFriends = lN.getRelationships(RelTypes.FRIENDOF).iterator();
while (lFriends.hasNext())
{
    Node lF = lFriends.next().getEndNode();
    if (lF.getId() == lN.getId())
        continue;
    Stack&lt;Node&gt; lStack = new Stack&lt;Node&gt;();
    Node lRootProject = lF.getRelationships(RelTypes.ROOTPROJECT).iterator().next().getEndNode();
    lStack.push(lRootProject);
    while (!lStack.isEmpty())
    {
        Node lCur = lStack.pop();
        if (lCur.hasRelationship(RelTypes.CHILDREN))
        {
            Iterator&lt;Relationship&gt; lChildren = lCur.getRelationships(RelTypes.CHILDREN).iterator();
            while (lChildren.hasNext())
            {
                Node lChild = lChildren.next().getEndNode();
                if (lChild.getId() == lCur.getId() ||
                    (lChild.hasProperty("pname") &amp;&amp; lOrgID != (Integer)lCur.getProperty("access")))
                        { continue; }
                lStack.push(lChild);
            }
        }
        if (lCur.hasProperty("pname"))
            lNumFound = lNumFound + 1;
    }
}
System.out.println(lN.getProperty("firstname") + " " + lN.getProperty("middlename") + " " + lN.getProperty("lastname") + " has access to " + lNumFound + " shared by friends");
</li>
          </ul>
        </li>
        <li>Compared with Python+sqlite:</li>
        <li class="code_comparator" meta='{"layout":[-40, 0, 1000, 200], "titles":["AffinityNG", "Python+sqlite"], "font_type":"Courier", "font_size":10, "start_side":1, "separator_width":4}'>
          <ul>
<li>
SELECT * FROM :0.friendof.rootproject.children{*}[access=:1].children[exists(pname)]
</li>
<li>
// Find all resources given access to 'iOid' by his friends (BFS)
lResult = 0
lDirsFID = []
lCursor.execute("SELECT p.rootproject FROM person p JOIN friend f ON (f.orgid2=p.orgid) WHERE (f.orgid1=%s);" % iOid)
for iC in lCursor:
    lDirsFID.append(iC[0])
while len(lDirsFID) &gt; 0:
    lQty = min(200, len(lDirsFID))
    lCurDirsFID = lDirsFID[:lQty]
    del lDirsFID[:lQty]
    lCurDirsFIDstr = ','.join(["%s" % iD for iD in lCurDirsFID])
    lCursor.execute("SELECT fid FROM project WHERE (parent_fid IN (%s));" % lCurDirsFIDstr)
    for iC in lCursor:
        lDirsFID.append(iC[0])
    lCursor.execute("SELECT COUNT(DISTINCT(resource.fid)) from resource JOIN project ON (resource.parent_fid = project.fid) WHERE (project.fid IN (%s) AND project.access_orgid=%s);" % (lCurDirsFIDstr, iOid))
    lResult = lResult + int(lCursor.fetchone()[0])
</li>
          </ul>
        </li>
      </ul>
    </li>
    <li class="step_1 mode_all vspacer" promostyle='{"delay":20000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":1000, "intradelay":1000, "fontsizes":[16,10]}'>
  <h1>More Goodies (2/2)</h1>
  <ul>
    <li class="step_0 mode_all">
      <p>Whole graphs with cycles may be inserted in a single statement<p>
      <ul>
        <li class="bullet_none">
        INSERT @:1 _type='home', address='12345 Sherbrooke Street, Toronto, Canada',
          machines={(INSERT @:2 _type='machine', name='centralHeating', home=@:1, state=0,
            sensors={(INSERT _type='sensor', function='movementDetector', machine=@:2)})}, alarm_locked=0
        </li>
        <li class="vspacer">10</li>
      </ul>
    </li>
    <li class="step_1 mode_all">
      <p>PINs can point to PINs and properties, but sub-structures can also be held by value</p>
      <ul>
        <li class="bullet_none">
          INSERT pos={x=10.0, y=20.0, z=30.0}, type='spaceship'
        </li>
        <li class="vspacer">10</li>
      </ul>
    </li>
    <li class="step_2 mode_all">
      <p>Collections may contain heterogeneous data</p>
      <ul>
        <li class="bullet_none">
          INSERT mycollection=
            {'string', X'DEF5', U'http://test/', 128, 3.40282f, 3.40282, true, TIMESTAMP '2010-12-31 23:59:59', INTERVAL '-12:00:00'}
        </li>
        <li class="vspacer">10</li>
      </ul>
    </li>
    <li class="step_3 mode_all">
      <p>The class hierarchy may evolve over time</p>
      <ul>
        <li class="bullet_none">CREATE CLASS moveable AS SELECT * WHERE x IN :0 AND y IN :1;</li>
        <li class="bullet_none">INSERT x=5, y=5, type='horse', _length=20.0m;</li>
        <li class="bullet_none">INSERT x=10, y=10, type='spaceship', _length=10.0m, wingspan=12.0m;</li>
        <li class="bullet_none">CREATE CLASS flying AS SELECT * FROM moveable WHERE EXISTS(wingspan);</li>
        <li class="vspacer">10</li>
      </ul>
    </li>
    <li class="step_4 mode_all">
      <p>Units of measurement are intrinsic and automatically converted</p>
      <ul>
        <li class="bullet_none">SET BASE 'http://eng.org/';</li>
        <li class="bullet_none">INSERT "length"=10m, "width"=0.5m, "height"=30cm;</li>
        <li class="bullet_none">SELECT CAST("length" AS ft), CAST("width" AS ft) WHERE EXISTS("length");</li>
        <li class="vspacer">10</li>
      </ul>
    </li>
    <li class="step_5 mode_all container_horizontal">
      <ul>
        <li class="container_vertical">
          <ul>
            <li>
              <p>No complication with strings<p>
              <ul>
                <li class="bullet_none">INSERT mytext='whether it is 2 bytes or 50 Mb of text, AffinityNG will handle it just the same';</li>
                <li class="bullet_none">INSERT 术语 = '电脑显示屏', 分类号 = '机A01上';</li>
              </ul>
            </li>
          </ul>
        </li>
        <li class="container_vertical">
          <ul>
            <li>Transactional full-text search</li>
            <li>
              <p>And much more...</p>
              <ul>
                <li class="bullet_none">Please refer to the online doc (http://affinityng.org)</li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li class="step_6 mode_all vspacer" promostyle='{"delay":20000}'>0</li>
  </ul>
</div>

<div class='slide' promostyle='{"theme":"graph-ng", "idledelay":1000, "intradelay":10, "fontsizes":[18,12,8]}'>
  <!-- Goal of this slide: show that significant, instantaneous, 0-installation-overhead experimentation is available -->
  <!-- Manual demonstrations can be added by the presenter, e.g. in pacman it's easy to add dead-ends, teleport the players, add/remove food etc. -->
  <h1>Online Simulations &amp; Learning Material</h1>
  <ul>
    <!-- <li class="step_0 mode_all">
      <p>Smart Grid SDW (Streaming Data Warehouse)</p>
      <ul>
        <li>
          <p class="bullet_none">Illustrate the smart grid</p>
          <ul>
            <li class="bullet_none">
            Show the activity of a constellation of inter-connected homes,
            devices and sensors, and the benefits at different levels:
            individual homes, neighbourhoods, states, service providing corporations etc.
            </li>
          </ul>
        </li>
        <li class="urllink" url='promo/demos/sdw/sdw.html' meta='{"font_size":12}'></li>
        <li class="vspacer">30</li>
      </ul>
    </li> -->
    <li class="step_0 mode_all vspacer">0</li>
    <li class="step_1 mode_all">
      <p>Simple Sensors</p>
      <ul>
        <li class="bullet_none">Show a simple, typical interaction between sensors</li>
        <li class="urllink" url='promo/demos/dsms/dsms_demo.html?default_setup=1' meta='{"font_size":12}'></li>
        <li class="vspacer">30</li>
      </ul>
    </li>
    <li class="step_2 mode_all">
      <p>Games &amp; Robots</p>
      <ul>
        <li class="bullet_none">Show a simple autonomous robot (with trivial &ldquo;vision&rdquo;), and the ease to express non-trivial logic &amp; relationships in SQL</li>
        <li class="urllink" url='promo/demos/robot/robot.html' meta='{"font_size":12}'></li>
        <li class="urllink" url='promo/demos/pacman/pacman.html' meta='{"font_size":12}'></li>
        <li class="vspacer">30</li>
      </ul>
    </li>
    <li class="step_3 mode_all">
      <p>Online Tutorial, Doc etc.</p>
      <ul>
        <li class="bullet_none">Populate the store quickly with the tutorial, then navigate via queries, 2d-map, clique enumeration, histograms etc.</li>
        <li class="urllink" url='console.html' meta='{"font_size":12}'></li>
      </ul>
    </li>
    <li class="step_4 mode_all vspacer" promostyle='{"delay":30000}'>0</li>
  </ul>
</div>

<div id='special'>
  <div id='bullet'>&middot;&nbsp;</div>
  <div id='logo_src'>../images/dsms/logo_raw.png</div>
  <div id='dashed_src'>../images/dsms/dashed.png</div>
  <div id='promo_url'>http://affinityng.org</div>
  <div id='copyright'>&copy; 2013 GoPivotal, Inc. All rights reserved.</div>
  <div id='help'>p: pause,resume&nbsp;&nbsp;&nbsp;s: stay&nbsp;&nbsp;&nbsp;space: accelerate&nbsp;&nbsp;&nbsp;left,right: change slide</div>
</div>

</body>
</html>
